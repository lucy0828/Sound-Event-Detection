//
// Academic License - for use in teaching, academic research, and meeting
// course requirements at degree granting institutions only.  Not for
// government, commercial, or other organizational use.
// File: stft.cpp
//
// MATLAB Coder version            : 5.2
// C/C++ source code generated on  : 07-Jul-2021 18:07:43
//

// Include Files
#include "stft.h"
#include "computeDFT.h"
#include "formatSTFTOutput.h"
#include "DAHostLib_Network.h"
#include "DAHostLib_rtw.h"
#include "coder_array.h"
#include <string.h>

// Function Definitions
//
// Arguments    : const float x_data[]
//                ::coder::array<creal32_T, 2U> &varargout_1
// Return Type  : void
//
namespace coder {
void stft(const float x_data[], ::coder::array<creal32_T, 2U> &varargout_1)
{
  static const float opts_Window[400]{0.0F,
                                      6.16837569E-5F,
                                      0.000246719806F,
                                      0.000555062492F,
                                      0.000986635801F,
                                      0.00154133316F,
                                      0.0022190176F,
                                      0.00301952218F,
                                      0.00394264935F,
                                      0.00498817116F,
                                      0.00615583F,
                                      0.00744533679F,
                                      0.00885637477F,
                                      0.0103885951F,
                                      0.012041619F,
                                      0.0138150398F,
                                      0.0157084186F,
                                      0.0177212916F,
                                      0.0198531579F,
                                      0.0221034922F,
                                      0.0244717412F,
                                      0.02695732F,
                                      0.029559616F,
                                      0.0322779864F,
                                      0.0351117589F,
                                      0.038060233F,
                                      0.0411226861F,
                                      0.044298362F,
                                      0.0475864746F,
                                      0.0509862117F,
                                      0.0544967391F,
                                      0.0581171848F,
                                      0.0618466586F,
                                      0.065684244F,
                                      0.0696289837F,
                                      0.0736799166F,
                                      0.0778360367F,
                                      0.0820963159F,
                                      0.0864597112F,
                                      0.0909251422F,
                                      0.0954915062F,
                                      0.100157671F,
                                      0.104922496F,
                                      0.109784797F,
                                      0.114743382F,
                                      0.119797014F,
                                      0.124944463F,
                                      0.130184457F,
                                      0.13551569F,
                                      0.140936852F,
                                      0.146446615F,
                                      0.152043596F,
                                      0.157726452F,
                                      0.163493738F,
                                      0.169344068F,
                                      0.175275981F,
                                      0.181288F,
                                      0.187378675F,
                                      0.193546474F,
                                      0.199789882F,
                                      0.206107378F,
                                      0.212497368F,
                                      0.218958318F,
                                      0.225488588F,
                                      0.232086599F,
                                      0.238750711F,
                                      0.245479286F,
                                      0.252270669F,
                                      0.259123176F,
                                      0.26603508F,
                                      0.27300474F,
                                      0.280030429F,
                                      0.287110358F,
                                      0.294242829F,
                                      0.301426053F,
                                      0.308658272F,
                                      0.315937728F,
                                      0.323262572F,
                                      0.330631047F,
                                      0.338041306F,
                                      0.345491499F,
                                      0.352979839F,
                                      0.360504448F,
                                      0.36806348F,
                                      0.375655055F,
                                      0.383277327F,
                                      0.390928388F,
                                      0.39860636F,
                                      0.406309336F,
                                      0.414035439F,
                                      0.421782762F,
                                      0.429549396F,
                                      0.437333375F,
                                      0.445132852F,
                                      0.452945858F,
                                      0.460770458F,
                                      0.468604743F,
                                      0.476446778F,
                                      0.484294623F,
                                      0.492146343F,
                                      0.5F,
                                      0.507853687F,
                                      0.515705407F,
                                      0.523553252F,
                                      0.531395257F,
                                      0.539229572F,
                                      0.547054172F,
                                      0.554867148F,
                                      0.562666595F,
                                      0.570450604F,
                                      0.578217208F,
                                      0.585964561F,
                                      0.593690634F,
                                      0.60139364F,
                                      0.609071612F,
                                      0.616722703F,
                                      0.624344945F,
                                      0.63193655F,
                                      0.639495552F,
                                      0.647020161F,
                                      0.654508471F,
                                      0.661958694F,
                                      0.669369F,
                                      0.676737428F,
                                      0.684062302F,
                                      0.691341698F,
                                      0.698573947F,
                                      0.705757201F,
                                      0.712889671F,
                                      0.719969571F,
                                      0.72699523F,
                                      0.73396492F,
                                      0.740876853F,
                                      0.747729361F,
                                      0.754520714F,
                                      0.761249304F,
                                      0.767913401F,
                                      0.774511397F,
                                      0.781041682F,
                                      0.787502646F,
                                      0.793892622F,
                                      0.800210118F,
                                      0.806453526F,
                                      0.812621355F,
                                      0.818712F,
                                      0.824724F,
                                      0.830655932F,
                                      0.836506248F,
                                      0.842273533F,
                                      0.847956419F,
                                      0.853553414F,
                                      0.859063148F,
                                      0.86448431F,
                                      0.869815528F,
                                      0.875055552F,
                                      0.880203F,
                                      0.885256648F,
                                      0.890215218F,
                                      0.895077527F,
                                      0.899842322F,
                                      0.904508471F,
                                      0.909074843F,
                                      0.913540304F,
                                      0.917903662F,
                                      0.922163963F,
                                      0.926320076F,
                                      0.930371F,
                                      0.934315741F,
                                      0.938153327F,
                                      0.941882789F,
                                      0.945503235F,
                                      0.94901377F,
                                      0.952413499F,
                                      0.955701649F,
                                      0.958877325F,
                                      0.961939752F,
                                      0.964888215F,
                                      0.967722F,
                                      0.970440388F,
                                      0.973042667F,
                                      0.97552824F,
                                      0.977896512F,
                                      0.980146825F,
                                      0.982278705F,
                                      0.984291553F,
                                      0.986184955F,
                                      0.987958372F,
                                      0.989611387F,
                                      0.991143644F,
                                      0.992554665F,
                                      0.993844151F,
                                      0.995011806F,
                                      0.996057332F,
                                      0.996980488F,
                                      0.997781F,
                                      0.998458683F,
                                      0.999013364F,
                                      0.999444962F,
                                      0.999753296F,
                                      0.999938309F,
                                      1.0F,
                                      0.999938309F,
                                      0.999753296F,
                                      0.999444962F,
                                      0.999013364F,
                                      0.998458683F,
                                      0.997781F,
                                      0.996980488F,
                                      0.996057332F,
                                      0.995011806F,
                                      0.993844151F,
                                      0.992554665F,
                                      0.991143644F,
                                      0.989611387F,
                                      0.987958372F,
                                      0.986184955F,
                                      0.984291553F,
                                      0.982278705F,
                                      0.980146825F,
                                      0.977896512F,
                                      0.97552824F,
                                      0.973042667F,
                                      0.970440388F,
                                      0.967722F,
                                      0.964888215F,
                                      0.961939752F,
                                      0.958877325F,
                                      0.955701649F,
                                      0.952413499F,
                                      0.94901377F,
                                      0.945503235F,
                                      0.941882789F,
                                      0.938153327F,
                                      0.934315741F,
                                      0.930371F,
                                      0.926320076F,
                                      0.922163963F,
                                      0.917903662F,
                                      0.913540304F,
                                      0.909074843F,
                                      0.904508471F,
                                      0.899842322F,
                                      0.895077527F,
                                      0.890215218F,
                                      0.885256648F,
                                      0.880203F,
                                      0.875055552F,
                                      0.869815528F,
                                      0.86448431F,
                                      0.859063148F,
                                      0.853553414F,
                                      0.847956419F,
                                      0.842273533F,
                                      0.836506248F,
                                      0.830655932F,
                                      0.824724F,
                                      0.818712F,
                                      0.812621355F,
                                      0.806453526F,
                                      0.800210118F,
                                      0.793892622F,
                                      0.787502646F,
                                      0.781041682F,
                                      0.774511397F,
                                      0.767913401F,
                                      0.761249304F,
                                      0.754520714F,
                                      0.747729361F,
                                      0.740876853F,
                                      0.73396492F,
                                      0.72699523F,
                                      0.719969571F,
                                      0.712889671F,
                                      0.705757201F,
                                      0.698573947F,
                                      0.691341698F,
                                      0.684062302F,
                                      0.676737428F,
                                      0.669369F,
                                      0.661958694F,
                                      0.654508471F,
                                      0.647020161F,
                                      0.639495552F,
                                      0.63193655F,
                                      0.624344945F,
                                      0.616722703F,
                                      0.609071612F,
                                      0.60139364F,
                                      0.593690634F,
                                      0.585964561F,
                                      0.578217208F,
                                      0.570450604F,
                                      0.562666595F,
                                      0.554867148F,
                                      0.547054172F,
                                      0.539229572F,
                                      0.531395257F,
                                      0.523553252F,
                                      0.515705407F,
                                      0.507853687F,
                                      0.5F,
                                      0.492146343F,
                                      0.484294623F,
                                      0.476446778F,
                                      0.468604743F,
                                      0.460770458F,
                                      0.452945858F,
                                      0.445132852F,
                                      0.437333375F,
                                      0.429549396F,
                                      0.421782762F,
                                      0.414035439F,
                                      0.406309336F,
                                      0.39860636F,
                                      0.390928388F,
                                      0.383277327F,
                                      0.375655055F,
                                      0.36806348F,
                                      0.360504448F,
                                      0.352979839F,
                                      0.345491499F,
                                      0.338041306F,
                                      0.330631047F,
                                      0.323262572F,
                                      0.315937728F,
                                      0.308658272F,
                                      0.301426053F,
                                      0.294242829F,
                                      0.287110358F,
                                      0.280030429F,
                                      0.27300474F,
                                      0.26603508F,
                                      0.259123176F,
                                      0.252270669F,
                                      0.245479286F,
                                      0.238750711F,
                                      0.232086599F,
                                      0.225488588F,
                                      0.218958318F,
                                      0.212497368F,
                                      0.206107378F,
                                      0.199789882F,
                                      0.193546474F,
                                      0.187378675F,
                                      0.181288F,
                                      0.175275981F,
                                      0.169344068F,
                                      0.163493738F,
                                      0.157726452F,
                                      0.152043596F,
                                      0.146446615F,
                                      0.140936852F,
                                      0.13551569F,
                                      0.130184457F,
                                      0.124944463F,
                                      0.119797014F,
                                      0.114743382F,
                                      0.109784797F,
                                      0.104922496F,
                                      0.100157671F,
                                      0.0954915062F,
                                      0.0909251422F,
                                      0.0864597112F,
                                      0.0820963159F,
                                      0.0778360367F,
                                      0.0736799166F,
                                      0.0696289837F,
                                      0.065684244F,
                                      0.0618466586F,
                                      0.0581171848F,
                                      0.0544967391F,
                                      0.0509862117F,
                                      0.0475864746F,
                                      0.044298362F,
                                      0.0411226861F,
                                      0.038060233F,
                                      0.0351117589F,
                                      0.0322779864F,
                                      0.029559616F,
                                      0.02695732F,
                                      0.0244717412F,
                                      0.0221034922F,
                                      0.0198531579F,
                                      0.0177212916F,
                                      0.0157084186F,
                                      0.0138150398F,
                                      0.012041619F,
                                      0.0103885951F,
                                      0.00885637477F,
                                      0.00744533679F,
                                      0.00615583F,
                                      0.00498817116F,
                                      0.00394264935F,
                                      0.00301952218F,
                                      0.0022190176F,
                                      0.00154133316F,
                                      0.000986635801F,
                                      0.000555062492F,
                                      0.000246719806F,
                                      6.16837569E-5F};
  static const char opts_FreqRange[8]{'o', 'n', 'e', 's', 'i', 'd', 'e', 'd'};
  array<creal32_T, 2U> S;
  array<float, 2U> c;
  array<float, 2U> xin;
  double f_data[512];
  int k;
  xin.set_size(400, 98);
  c.set_size(400, 98);
  for (int iCol{0}; iCol < 98; iCol++) {
    k = 160 * iCol;
    for (int i{0}; i < 400; i++) {
      xin[i + 400 * iCol] = x_data[k + i];
    }
    for (k = 0; k < 400; k++) {
      c[k + 400 * iCol] = opts_Window[k] * xin[k + 400 * iCol];
    }
  }
  computeDFT(c, S, f_data, &k);
  signal::internal::stft::formatSTFTOutput(S, f_data, &k, opts_FreqRange,
                                           varargout_1);
}

} // namespace coder

//
// File trailer for stft.cpp
//
// [EOF]
//
